<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="chargeInfo">
      <Property name="creationType">com.jdry.pms.chargeManager.pojo.ChargeInfoEntity</Property>
      <PropertyDef name="owner_name">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="charge_type_no">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="charge_type_name">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="room_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="room_no">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="begin_time">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="end_time">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="price">
        <Property name="dataType">float</Property>
        <Property name="displayFormat">#.00</Property>
      </PropertyDef>
      <PropertyDef name="count">
        <Property name="dataType">int</Property>
        <Property name="defaultValue">1</Property>
      </PropertyDef>
      <PropertyDef name="rate">
        <Property name="dataType">float</Property>
        <Property name="defaultValue">1</Property>
      </PropertyDef>
      <PropertyDef name="receive_amount">
        <Property name="dataType">float</Property>
        <Property name="displayFormat">#.00</Property>
      </PropertyDef>
      <PropertyDef name="paid_amount">
        <Property name="dataType">float</Property>
        <Property name="displayFormat">#.00</Property>
      </PropertyDef>
      <PropertyDef name="arrearage_amount">
        <Property name="dataType">float</Property>
        <Property name="displayFormat">#.00</Property>
      </PropertyDef>
      <PropertyDef name="paid_date">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="paid_mode">
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="oper_emp_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="update_date">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="delete_id">
        <Property name="dataType">int</Property>
      </PropertyDef>
      <PropertyDef name="remark">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="charge_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="charge_no">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="owner_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="state">
        <Property></Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">01</Property>
                <Property name="value">应收</Property>
              </Entity>
              <Entity>
                <Property name="key">02</Property>
                <Property name="value">已收</Property>
              </Entity>
              <Entity>
                <Property name="key">03</Property>
                <Property name="value">欠费</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
    </DataType>
    <DataType name="chargeTypeSetting">
      <Property name="creationType">com.jdry.pms.chargeManager.pojo.ChargeTypeSettingEntity</Property>
      <PropertyDef name="charge_type_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="charge_type_no">
        <Property></Property>
        <Property name="label">项目编号</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="charge_type_name">
        <Property></Property>
        <Property name="label">项目名称</Property>
      </PropertyDef>
      <PropertyDef name="charge_mode">
        <Property></Property>
        <Property name="label">计费方式</Property>
        <Property name="required">true</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">01</Property>
                <Property name="value">建面</Property>
              </Entity>
              <Entity>
                <Property name="key">02</Property>
                <Property name="value">定额</Property>
              </Entity>
              <Entity>
                <Property name="key">03</Property>
                <Property name="value">公式</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
        <Property name="readOnly">false</Property>
      </PropertyDef>
      <PropertyDef name="charge_price">
        <Property name="dataType">float</Property>
        <Property name="label">单价</Property>
        <Property name="required">true</Property>
        <Property name="displayFormat">#.00</Property>
      </PropertyDef>
      <PropertyDef name="update_emp_id">
        <Property></Property>
        <Property name="label">更新人员</Property>
      </PropertyDef>
      <PropertyDef name="update_date">
        <Property name="dataType">DateTime</Property>
      </PropertyDef>
      <PropertyDef name="charge_way">
        <Property></Property>
        <Property name="label">收费方式</Property>
        <Property name="required">true</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">01</Property>
                <Property name="value">周期性</Property>
              </Entity>
              <Entity>
                <Property name="key">02</Property>
                <Property name="value">临时性</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="charge_type">
        <Property></Property>
        <Property name="label">收费类型</Property>
        <Property name="required">true</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">01</Property>
                <Property name="value">正常</Property>
              </Entity>
              <Entity>
                <Property name="key">02</Property>
                <Property name="value">押金</Property>
              </Entity>
              <Entity>
                <Property name="key">03</Property>
                <Property name="value">预收款</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="charge_cycle_count">
        <Property name="dataType">int</Property>
        <Property name="label">计费周期数</Property>
      </PropertyDef>
      <PropertyDef name="charge_cycle_unit">
        <Property></Property>
        <Property name="label">周期单位</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">01</Property>
                <Property name="value">日</Property>
              </Entity>
              <Entity>
                <Property name="key">02</Property>
                <Property name="value">周</Property>
              </Entity>
              <Entity>
                <Property name="key">03</Property>
                <Property name="value">月</Property>
              </Entity>
              <Entity>
                <Property name="key">04</Property>
                <Property name="value">年</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
    </DataType>
    <DataType name="AllArea">
      <Property name="creationType">com.jdry.pms.basicInfo.pojo.AllArea</Property>
      <PropertyDef name="buildId">
        <Property></Property>
        <Property name="label">楼盘ID</Property>
      </PropertyDef>
      <PropertyDef name="buildName">
        <Property></Property>
        <Property name="label">楼盘名称</Property>
        <Property name="required">true</Property>
        <Validator type="ajax">
          <Property name="name">checkName</Property>
          <Property name="executingMessage">正在校验...</Property>
          <Property name="service">allAreaView#checkAllArea</Property>
        </Validator>
      </PropertyDef>
      <PropertyDef name="remark">
        <Property></Property>
        <Property name="label">备注</Property>
      </PropertyDef>
      <Reference name="areaProperty">
        <Property name="dataType">[AreaProperty]</Property>
        <Property name="dataProvider">areaPropertyView#queryAreaPropertyByParent</Property>
        <Property name="parameter">$${this.buildId}</Property>
      </Reference>
    </DataType>
    <DataType name="AreaProperty">
      <Property name="creationType">com.jdry.pms.basicInfo.pojo.AreaProperty</Property>
      <PropertyDef name="communityId">
        <Property></Property>
        <Property name="label">小区ID</Property>
      </PropertyDef>
      <PropertyDef name="communityName">
        <Property></Property>
        <Property name="label">小区名称</Property>
      </PropertyDef>
      <PropertyDef name="belongBuildId">
        <Property></Property>
        <Property name="label">所属楼盘</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;areaPropertyView#getAllAreaId&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="remark">
        <Property></Property>
        <Property name="label">备注</Property>
      </PropertyDef>
      <PropertyDef name="belongBuildName">
        <Property name="label">所属楼盘</Property>
      </PropertyDef>
      <Reference name="buildingProperty">
        <Property name="parameter">$${this.communityId}</Property>
        <Property name="dataType">[BuildingProperty]</Property>
        <Property name="dataProvider">buildingPropertyView#queryBuildingPropertyByParent</Property>
      </Reference>
    </DataType>
    <DataType name="BuildingProperty">
      <Property name="creationType">com.jdry.pms.basicInfo.pojo.BuildingProperty</Property>
      <PropertyDef name="storiedBuildId">
        <Property></Property>
        <Property name="label">楼栋ID</Property>
      </PropertyDef>
      <PropertyDef name="storiedBuildName">
        <Property></Property>
        <Property name="label">楼栋名称</Property>
        <Validator type="ajax">
          <Property name="name">checkName</Property>
          <Property name="service">buildingPropertyView#checkBuidName</Property>
          <Property name="executingMessage">正在验证...</Property>
        </Validator>
      </PropertyDef>
      <PropertyDef name="belongCommId">
        <Property></Property>
        <Property name="label">所属小区</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;buildingPropertyView#getCommId&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="remark">
        <Property></Property>
        <Property name="label">备注</Property>
      </PropertyDef>
      <Reference name="houseProperty">
        <Property name="dataType">[HouseProperty]</Property>
        <Property name="parameter">$${this.storiedBuildId}</Property>
        <Property name="dataProvider">housePropertyView#queryHousePropertyByParent</Property>
      </Reference>
    </DataType>
    <DataType name="HouseProperty">
      <Property name="creationType">com.jdry.pms.basicInfo.pojo.HouseProperty</Property>
      <PropertyDef name="roomId">
        <Property></Property>
        <Property name="label">房间ID</Property>
      </PropertyDef>
      <PropertyDef name="roomNo">
        <Property></Property>
        <Property name="label">房间号</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="belongSbId">
        <Property></Property>
        <Property name="label">所属楼栋</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;housePropertyView#getBuilding&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="houseType">
        <Property></Property>
        <Property name="label">户型</Property>
      </PropertyDef>
      <PropertyDef name="buildArea">
        <Property name="dataType">Float</Property>
        <Property name="label">建筑面积</Property>
        <Property name="displayFormat">#.00</Property>
      </PropertyDef>
      <PropertyDef name="withinArea">
        <Property name="dataType">Float</Property>
        <Property name="label">套内面积</Property>
        <Property name="displayFormat">#.00</Property>
      </PropertyDef>
      <PropertyDef name="roomType">
        <Property></Property>
        <Property name="label">房间类型</Property>
        <Property name="required">true</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;housePropertyView#getRoomType&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="roomState">
        <Property></Property>
        <Property name="label">房间状态</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;housePropertyView#getRoomState&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="chargeObject">
        <Property></Property>
        <Property name="label">收费对象</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;housePropertyView#getChargeObject&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="remark">
        <Property></Property>
        <Property name="label">备注</Property>
      </PropertyDef>
      <PropertyDef name="buildName">
        <Property name="label">所属楼盘</Property>
      </PropertyDef>
      <PropertyDef name="buildId"/>
      <PropertyDef name="areaName">
        <Property name="label">所属小区</Property>
      </PropertyDef>
      <PropertyDef name="areaId"/>
      <PropertyDef name="buildingName">
        <Property name="label">所属楼宇</Property>
      </PropertyDef>
      <PropertyDef name="buildingId"/>
    </DataType>
    <DataType name="TpropertyOwner">
      <Property name="creationType">com.jdry.pms.basicInfo.pojo.PropertyOwner</Property>
      <PropertyDef name="ownerId">
        <Property></Property>
        <Property name="label">业主ID</Property>
      </PropertyDef>
      <PropertyDef name="roomId">
        <Property></Property>
        <Property name="label">房间ID</Property>
      </PropertyDef>
      <PropertyDef name="roomNo">
        <Property></Property>
        <Property name="label">房间号</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="ownerName">
        <Property></Property>
        <Property name="label">业主姓名</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="phone">
        <Property></Property>
        <Property name="label">联系电话</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="cardId">
        <Property></Property>
        <Property name="label">身份证号</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="carId">
        <Property></Property>
        <Property name="label">车牌号</Property>
      </PropertyDef>
      <PropertyDef name="ownerType">
        <Property></Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">0</Property>
                <Property name="value">一般</Property>
              </Entity>
              <Entity>
                <Property name="key">1</Property>
                <Property name="value">重要</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
        <Property name="label">业主类型</Property>
      </PropertyDef>
      <PropertyDef name="makeRoomDate">
        <Property name="dataType">Date</Property>
        <Property name="label">交房日期</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="decorateDate">
        <Property name="dataType">Date</Property>
        <Property name="label">装修日期</Property>
      </PropertyDef>
      <PropertyDef name="remark">
        <Property></Property>
        <Property name="label">备注</Property>
      </PropertyDef>
    </DataType>
    <DataType name="paidInfo" parent="Map">
      <PropertyDef name="receiveable_total">
        <Property name="dataType">float</Property>
        <Property name="displayFormat">#.00</Property>
        <Property name="label">应收合计</Property>
      </PropertyDef>
      <PropertyDef name="receive_amount">
        <Property name="dataType">float</Property>
        <Property name="displayFormat">#.00</Property>
        <Property name="label">应缴金额</Property>
      </PropertyDef>
      <PropertyDef name="paid_count">
        <Property name="dataType">float</Property>
        <Property name="displayFormat">#.00</Property>
        <Property name="label">交款金额</Property>
      </PropertyDef>
      <PropertyDef name="odd_type">
        <Property name="label">零头选项</Property>
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="odd_count">
        <Property name="dataType">float</Property>
        <Property name="displayFormat">#.00</Property>
        <Property name="label">零头找补</Property>
      </PropertyDef>
      <PropertyDef name="remark">
        <Property name="dataType">String</Property>
        <Property name="label">备注</Property>
      </PropertyDef>
      <PropertyDef name="paid_mode">
        <Property name="mapping">
          <Property name="mapValues"/>
        </Property>
      </PropertyDef>
      <PropertyDef name="ticket_mode">
        <Property name="mapping">
          <Property name="mapValues"/>
        </Property>
      </PropertyDef>
      <PropertyDef name="end_date">
        <Property name="displayFormat">Y-m-d</Property>
        <Property name="dataType">Date</Property>
        <Property name="label">截至时间</Property>
      </PropertyDef>
    </DataType>
    <DataType name="paidInfoSearch" parent="Map">
      <PropertyDef name="paid_mode">
        <Property name="mapping">
          <Property name="mapValues"/>
        </Property>
      </PropertyDef>
      <PropertyDef name="ticket_mode">
        <Property name="mapping">
          <Property name="mapValues"/>
        </Property>
      </PropertyDef>
      <PropertyDef name="end_date">
        <Property name="displayFormat">Y-m-d</Property>
        <Property name="dataType">Date</Property>
        <Property name="label">截至时间</Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <Property name="packages">fontawesome</Property>
    <DataSet id="dsChargeInfo">
      <Property name="dataType">[chargeInfo]</Property>
      <Property name="dataProvider">chargeReceivableInfo#queryAll</Property>
      <Property name="parameter"></Property>
      <Property name="pageSize">10</Property>
      <Property name="loadMode">manual</Property>
    </DataSet>
    <DataSet id="dsPaidInfo">
      <Property name="dataType">[paidInfo]</Property>
      <Property name="parameter"></Property>
      <Property name="loadMode">manual</Property>
    </DataSet>
    <DataSet id="dsPaidInfoSearch">
      <ClientEvent name="onReady">self.insert();&#xD;
</ClientEvent>
      <Property name="dataType">[paidInfoSearch]</Property>
      <Property name="parameter"></Property>
      <Property name="loadMode">manual</Property>
    </DataSet>
    <DataSet id="dsChargeTypeSet">
      <Property name="dataType">[chargeTypeSetting]</Property>
      <Property name="dataProvider">chargeTypeSetting#queryAll</Property>
      <Property name="parameter">
        <Entity>
          <Property name="charge_way">02</Property>
        </Entity>
      </Property>
      <Property name="pageSize">10</Property>
      <Property name="loadMode">lazy</Property>
    </DataSet>
    <DataSet id="dsAllArea">
      <Property name="dataType">[AllArea]</Property>
      <Property name="dataProvider">allAreaView#queryAllAreaByParam</Property>
      <Property name="parameter"></Property>
    </DataSet>
    <DataSet id="dsOwner">
      <Property name="dataType">[TpropertyOwner]</Property>
      <Property name="dataProvider">ownerInfoView#queryPropertyOwnerByParent</Property>
      <Property name="parameter"></Property>
      <Property name="loadMode">manual</Property>
    </DataSet>
    <DataSet id="dsRoomAndOwner">
      <Property name="dataProvider">roomSituationView#queryRoomAndOwnerByJdbc</Property>
      <Property name="loadMode">manual</Property>
      <Property name="dataType">[TpropertyOwner]</Property>
    </DataSet>
    <DataSet id="dsHouse">
      <Property name="dataType">[HouseProperty]</Property>
      <Property name="dataProvider">housePropertyView#queryHouseProperty</Property>
      <Property name="parameter"></Property>
      <Property name="pageSize">1</Property>
      <Property name="loadMode">manual</Property>
    </DataSet>
    <Dialog id="diaChargeInfo">
      <ClientEvent name="onClose">this.id(&quot;dsChargeInfo&quot;).flush();&#xD;
</ClientEvent>
      <Property name="visible">false</Property>
      <Property name="width">65%</Property>
      <Property name="height">70%</Property>
      <Property name="caption">账单信息</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">this.id(&quot;diaChargeInfo&quot;).hide();&#xD;
this.id(&quot;updateAction1&quot;).execute();&#xD;
&#xD;
&#xD;
var roomNo = view.get(&quot;#dsRoomAndOwner&quot;).getData(&quot;#&quot;).get(&quot;roomNo&quot;);&#xD;
var parameter = {&#xD;
		room_no:roomNo&#xD;
};&#xD;
view.get(&quot;#dsChargeInfo&quot;).set(&quot;parameter&quot;,parameter).flushAsync();&#xD;
view.get(&quot;#receivable_total&quot;).set(&quot;value&quot;, 0);&#xD;
</ClientEvent>
          <Property name="caption">保存</Property>
          <Property name="icon">url(>skin>common/icons.gif) -160px -20px</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm id="formChargeInfo">
          <Property name="dataSet">dsChargeInfo</Property>
          <Property name="labelWidth">100</Property>
          <AutoFormElement>
            <Property name="name">room_no</Property>
            <Property name="property">room_no</Property>
            <Property name="label">房间编号</Property>
            <Property name="trigger">customDropDown1</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">owner_name</Property>
            <Property name="property">owner_name</Property>
            <Property name="label">业主</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">charge_type_no</Property>
            <Property name="property">charge_type_no</Property>
            <Property name="label">收费项编号</Property>
            <Property name="hideMode">display</Property>
            <Property name="visible">false</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">charge_type_name</Property>
            <Property name="property">charge_type_name</Property>
            <Property name="label">收费项名称</Property>
            <Property name="trigger">chargeTypeDropDown</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">price</Property>
            <Property name="property">price</Property>
            <Property name="label">单价</Property>
            <Property name="hideMode">display</Property>
            <Property name="visible">false</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">receive_amount</Property>
            <Property name="property">receive_amount</Property>
            <Property name="label">应收金额</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">begin_time</Property>
            <Property name="property">begin_time</Property>
            <Property name="label">开始日期</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">end_time</Property>
            <Property name="property">end_time</Property>
            <Property name="label">结束日期</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">oper_emp_id</Property>
            <Property name="property">oper_emp_id</Property>
            <Property name="label">操作人</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">update_date</Property>
            <Property name="property">update_date</Property>
            <Property name="label">更新日期</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement layoutConstraint="colSpan:2">
            <Property name="name">remark</Property>
            <Property name="property">remark</Property>
            <Property name="label">备注</Property>
            <Property name="editorType">TextArea</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">state</Property>
            <Property name="property">state</Property>
            <Property name="label">状态</Property>
            <Property name="hideMode">display</Property>
            <Property name="visible">false</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">room_id</Property>
            <Property name="property">room_id</Property>
            <Property name="visible">false</Property>
            <Property name="hideMode">display</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">owner_id</Property>
            <Property name="property">owner_id</Property>
            <Property name="visible">false</Property>
            <Property name="hideMode">display</Property>
            <Editor/>
          </AutoFormElement>
        </AutoForm>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="diaPaidInfo">
      <ClientEvent name="onClose">//this.id(&quot;dsChargeInfo&quot;).flush();&#xD;
</ClientEvent>
      <Property name="visible">false</Property>
      <Property name="width">40%</Property>
      <Property name="height">45%</Property>
      <Property name="caption">收费确认</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var datas = view.get(&quot;#chargeInfoGrid.selection&quot;);&#xD;
&#xD;
var list = [];&#xD;
datas.each(function(data){&#xD;
	list.push(data._data);&#xD;
});&#xD;
&#xD;
var action = view.get('#paidInfoAction');&#xD;
action.set('parameter', list);&#xD;
action.execute(function(){&#xD;
	var curr = view.get(&quot;#dsRoomAndOwner&quot;).getData(&quot;#&quot;);&#xD;
	if(curr != null ){	&#xD;
		var parameter = {&#xD;
				room_no:curr.get(&quot;roomNo&quot;)&#xD;
		};&#xD;
		&#xD;
		view.get(&quot;#dsChargeInfo&quot;).set(&quot;parameter&quot;,parameter).flushAsync();&#xD;
		view.get(&quot;#receivable_total&quot;).set(&quot;value&quot;, 0);&#xD;
	}&#xD;
	this.id(&quot;diaPaidInfo&quot;).hide();&#xD;
});&#xD;
&#xD;
&#xD;
&#xD;
</ClientEvent>
          <Property name="caption">保存</Property>
          <Property name="icon">url(>skin>common/icons.gif) -160px -20px</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm id="formPaidInfo">
          <Property name="dataSet">dsPaidInfo</Property>
          <Property name="labelWidth">100</Property>
          <AutoFormElement>
            <Property name="name">receiveable_total</Property>
            <Property name="property">receiveable_total</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">receive_amount</Property>
            <Property name="property">receive_amount</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">paid_count</Property>
            <Property name="property">paid_count</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">odd_type</Property>
            <Property name="property">odd_type</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">odd_count</Property>
            <Property name="property">odd_count</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">remark</Property>
            <Property name="property">remark</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">paid_mode</Property>
            <Property name="property">paid_mode</Property>
            <Property name="visible">false</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">ticket_mode</Property>
            <Property name="property">ticket_mode</Property>
            <Property name="visible">false</Property>
            <Editor/>
          </AutoFormElement>
        </AutoForm>
      </Children>
      <Tools/>
    </Dialog>
    <SplitPanel>
      <Property name="position">200</Property>
      <MainControl>
        <Container>
          <AutoForm id="ownerInfo">
            <Property name="dataSet">dsOwner</Property>
            <Property name="labelWidth">80</Property>
            <Property name="style">
              <Property name="visibility">visible</Property>
            </Property>
            <Property name="cols">300,300,300</Property>
            <AutoFormElement>
              <Property name="name">roomNo</Property>
              <Property name="property">roomNo</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">ownerName</Property>
              <Property name="property">ownerName</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">phone</Property>
              <Property name="property">phone</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">ownerType</Property>
              <Property name="property">ownerType</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">makeRoomDate</Property>
              <Property name="property">makeRoomDate</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">decorateDate</Property>
              <Property name="property">decorateDate</Property>
              <Editor/>
            </AutoFormElement>
          </AutoForm>
          <AutoForm id="roomDetail">
            <ClientEvent name="onReady">$(&quot;.d-text-box&quot;).css({&quot;background&quot;:&quot;#fff&quot;});&#xD;
</ClientEvent>
            <Property name="dataSet">dsHouse</Property>
            <Property name="style">
              <Property name="visibility">visible</Property>
            </Property>
            <Property name="readOnly">true</Property>
            <Property name="labelWidth">80</Property>
            <Property name="cols">300,300,300</Property>
            <AutoFormElement>
              <Property name="name">buildName</Property>
              <Property name="property">buildName</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">areaName</Property>
              <Property name="property">areaName</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">buildingName</Property>
              <Property name="property">buildingName</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">houseType</Property>
              <Property name="property">houseType</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">buildArea</Property>
              <Property name="property">buildArea</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">withinArea</Property>
              <Property name="property">withinArea</Property>
              <Editor/>
            </AutoFormElement>
          </AutoForm>
          <AutoForm id="searchInfo">
            <Property name="cols">300,300,300</Property>
            <Property name="labelWidth">80</Property>
            <Property name="dataType">paidInfo</Property>
            <AutoFormElement id="receivable_total">
              <Property name="property">receiveable_total</Property>
              <Property name="editable">false</Property>
              <Property name="label">应收合计</Property>
              <Property name="name">receiveable_total</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="property">advance_count</Property>
              <Property name="editable">false</Property>
              <Property name="label">预付金额</Property>
              <Property name="name">advance_count</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="property">discount</Property>
              <Property name="editable">false</Property>
              <Property name="label">优惠金额</Property>
              <Property name="name">discount</Property>
              <Editor/>
            </AutoFormElement>
          </AutoForm>
          <AutoForm id="paidSearchInfo">
            <Property name="cols">300,300,300</Property>
            <Property name="labelWidth">80</Property>
            <Property name="dataSet">dsPaidInfoSearch</Property>
            <AutoFormElement>
              <Property name="name">end_date</Property>
              <Property name="property">end_date</Property>
              <Property name="trigger">defaultDateTimeDropDown</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement id="pay_mode">
              <Property name="label">收款方式</Property>
              <Property name="property">paid_mode</Property>
              <Property name="trigger">PayModeDropDown</Property>
              <Property name="name">paid_mode</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement id="ticket_mode">
              <Property name="label">开票方式</Property>
              <Property name="property">ticket_mode</Property>
              <Property name="trigger">TicketModeDropDown</Property>
              <Property name="name">ticket_mode</Property>
              <Editor/>
            </AutoFormElement>
          </AutoForm>
          <ToolBar>
            <Fill/>
            <ToolBarButton>
              <ClientEvent name="onClick">var curr = view.get(&quot;#dsRoomAndOwner&quot;).getData(&quot;#&quot;);&#xD;
if(curr != null ){	&#xD;
	var parameter = {&#xD;
			room_no:curr.get(&quot;roomNo&quot;)&#xD;
	};&#xD;
	&#xD;
	view.get(&quot;#dsChargeInfo&quot;).set(&quot;parameter&quot;,parameter).flushAsync();&#xD;
	view.get(&quot;#receivable_total&quot;).set(&quot;value&quot;, 0);&#xD;
}</ClientEvent>
              <Property name="caption">刷新</Property>
            </ToolBarButton>
            <Separator/>
            <ToolBarButton>
              <ClientEvent name="onClick">var receivable_total = view.get(&quot;#receivable_total&quot;).get(&quot;value&quot;);&#xD;
var paid_mode = view.get(&quot;#pay_mode&quot;).get(&quot;value&quot;);&#xD;
var ticket_mode = view.get(&quot;#ticket_mode&quot;).get(&quot;value&quot;);&#xD;
if(paid_mode==null || ticket_mode==null){&#xD;
	dorado.MessageBox.alert(&quot;收款方式和开票方式不能为空！&quot;);&#xD;
	return;&#xD;
}&#xD;
&#xD;
if(ticket_mode=='发票'){&#xD;
	ticket_mode='01';&#xD;
}else if(ticket_mode=='收据'){&#xD;
	ticket_mode='02';&#xD;
}&#xD;
&#xD;
if(paid_mode=='抵扣'){&#xD;
	paid_mode='01';&#xD;
}else if(paid_mode=='现金'){&#xD;
	paid_mode='02';&#xD;
}else if(paid_mode=='支票'){&#xD;
	paid_mode='03';&#xD;
}else if(paid_mode=='转账'){&#xD;
	paid_mode='04';&#xD;
}else if(paid_mode=='支付宝'){&#xD;
	paid_mode='05';&#xD;
}else if(paid_mode=='POS机'){&#xD;
	paid_mode='06';&#xD;
}else if(paid_mode=='收据'){&#xD;
	paid_mode='99';&#xD;
}&#xD;
&#xD;
var data={&#xD;
	receiveable_total:receivable_total,&#xD;
	receive_amount:receivable_total,&#xD;
	paid_mode:paid_mode,&#xD;
	ticket_mode:ticket_mode&#xD;
}&#xD;
this.id(&quot;dsPaidInfo&quot;).insert(data);&#xD;
this.id(&quot;diaPaidInfo&quot;).show();&#xD;
var user = &quot;${loginUser.getUsername()}&quot;;&#xD;
&#xD;
</ClientEvent>
              <Property name="caption">收费</Property>
            </ToolBarButton>
            <Separator/>
            <ToolBarButton>
              <Property name="caption">优惠</Property>
            </ToolBarButton>
            <Separator/>
            <ToolBarButton>
              <ClientEvent name="onClick">this.id(&quot;diaChargeInfo&quot;).show();&#xD;
var user = &quot;${loginUser.getUsername()}&quot;;&#xD;
data = {&#xD;
	begin_time:new Date(),&#xD;
	end_time:new Date(),&#xD;
	update_date:new Date(),&#xD;
	oper_emp_id:user&#xD;
}&#xD;
&#xD;
this.id(&quot;dsChargeInfo&quot;).insert(data);&#xD;
/*&#xD;
var ser = this.id(&quot;dsChargeInfo.data.current&quot;);&#xD;
alert(new Date());&#xD;
ser.set(&quot;begin_time&quot;,new Date());&#xD;
*/</ClientEvent>
              <Property name="caption">新增</Property>
              <Property name="iconClass">fa fa-plus</Property>
              <Property name="hideMode">visibility</Property>
            </ToolBarButton>
            <Separator/>
            <ToolBarButton>
              <ClientEvent name="onClick">this.id(&quot;diaChargeInfo&quot;).show();&#xD;
</ClientEvent>
              <Property name="caption">修改</Property>
              <Property name="iconClass">fa fa-edit</Property>
            </ToolBarButton>
            <Separator/>
            <ToolBarButton>
              <ClientEvent name="onClick">var action = this.id(&quot;deleteAction&quot;);&#xD;
dorado.MessageBox.confirm(&quot;真的要完成选中的任务吗？&quot;,function(){&#xD;
	action.execute(function(){&#xD;
		this.id(&quot;dsChargeInfo&quot;).flushAsync();&#xD;
		//ds.getData(&quot;#&quot;).reset(&quot;processInstances&quot;);&#xD;
	});&#xD;
});&#xD;
</ClientEvent>
              <Property name="caption">删除</Property>
              <Property name="iconClass">fa fa-minus</Property>
            </ToolBarButton>
          </ToolBar>
          <DataGrid id="chargeInfoGrid">
            <ClientEvent name="onSelectionChange">//alert(arg.added[0].get(&quot;receive_amount&quot;));&#xD;
var total = view.get(&quot;#receivable_total&quot;).get(&quot;value&quot;);&#xD;
if(total == null){&#xD;
	total = 0;&#xD;
}&#xD;
&#xD;
if(arg.added != null){&#xD;
	view.get(&quot;#receivable_total&quot;).set(&quot;value&quot;, total + arg.added[0].get(&quot;receive_amount&quot;));	&#xD;
}&#xD;
&#xD;
if(arg.removed != null){&#xD;
	view.get(&quot;#receivable_total&quot;).set(&quot;value&quot;, total - arg.removed[0].get(&quot;receive_amount&quot;));&#xD;
}&#xD;
</ClientEvent>
            <Property name="dataSet">dsChargeInfo</Property>
            <Property name="readOnly">true</Property>
            <Property name="scrollMode">lazyRender</Property>
            <Property name="height">286px</Property>
            <Property name="selectionMode">multiRows</Property>
            <RowNumColumn/>
            <RowSelectorColumn/>
            <DataColumn name="charge_no">
              <Property name="property">charge_no</Property>
              <Property name="caption">账单编号</Property>
            </DataColumn>
            <DataColumn name="owner_name">
              <Property name="property">owner_name</Property>
              <Property name="caption">业主姓名</Property>
            </DataColumn>
            <DataColumn name="charge_type_no">
              <Property name="property">charge_type_no</Property>
              <Property name="caption">收费类型</Property>
            </DataColumn>
            <DataColumn name="charge_type_name">
              <Property name="property">charge_type_name</Property>
              <Property name="caption">收费项目</Property>
            </DataColumn>
            <DataColumn name="room_no">
              <Property name="property">room_no</Property>
              <Property name="caption">房间编号</Property>
            </DataColumn>
            <DataColumn name="begin_time">
              <Property name="property">begin_time</Property>
              <Property name="caption">开始时间</Property>
            </DataColumn>
            <DataColumn name="end_time">
              <Property name="property">end_time</Property>
              <Property name="caption">结束时间</Property>
            </DataColumn>
            <DataColumn name="price">
              <Property name="property">price</Property>
              <Property name="caption">价格</Property>
            </DataColumn>
            <DataColumn name="count">
              <Property name="property">count</Property>
              <Property name="caption">数量</Property>
            </DataColumn>
            <DataColumn name="rate">
              <Property name="property">rate</Property>
              <Property name="caption">倍率</Property>
            </DataColumn>
            <DataColumn name="receive_amount">
              <Property name="property">receive_amount</Property>
              <Property name="caption">应收金额</Property>
            </DataColumn>
            <DataColumn name="paid_amount">
              <Property name="property">paid_amount</Property>
              <Property name="caption">实收金额</Property>
              <Property name="visible">true</Property>
            </DataColumn>
            <DataColumn name="arrearage_amount">
              <Property name="property">arrearage_amount</Property>
              <Property name="caption">欠费金额</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="state">
              <Property name="property">state</Property>
              <Property name="caption">状态</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="paid_date">
              <Property name="property">paid_date</Property>
              <Property name="caption">收款日期</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="paid_mode">
              <Property name="property">paid_mode</Property>
              <Property name="caption">收款方式</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="oper_emp_id">
              <Property name="property">oper_emp_id</Property>
              <Property name="caption">操作人</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="update_date">
              <Property name="property">update_date</Property>
              <Property name="caption">更新时间</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="remark">
              <Property name="property">remark</Property>
              <Property name="caption">备注</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="room_id">
              <Property name="property">room_id</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="delete_id">
              <Property name="property">delete_id</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="charge_id">
              <Property name="property">charge_id</Property>
              <Property name="visible">false</Property>
            </DataColumn>
            <DataColumn name="owner_id">
              <Property name="property">owner_id</Property>
              <Property name="visible">false</Property>
            </DataColumn>
          </DataGrid>
          <ToolBar>
            <Fill/>
            <DataPilot>
              <Property name="dataSet">dsChargeInfo</Property>
            </DataPilot>
          </ToolBar>
        </Container>
      </MainControl>
      <SideControl>
        <Container>
          <ToolBar>
            <ToolBarLabel>
              <Property name="text">房间导航</Property>
            </ToolBarLabel>
          </ToolBar>
          <TabControl>
            <ControlTab>
              <Property name="caption">房间树</Property>
              <DataTree>
                <ClientEvent name="onDataRowClick">var obj = self.get(&quot;currentEntity&quot;);&#xD;
var level = self.get(&quot;currentNode&quot;).get(&quot;level&quot;);&#xD;
&#xD;
if(level == 4){&#xD;
	var data = {&#xD;
		roomId:obj.get(&quot;roomId&quot;)&#xD;
	};&#xD;
	//view.get(&quot;#noSelectTip&quot;).set(&quot;visible&quot;,false);&#xD;
	view.get(&quot;#roomDetail&quot;).refreshData();&#xD;
	view.get(&quot;#ownerInfo&quot;).refreshData();&#xD;
	//$('#d_roomDetail').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
	//$('#d_ownerInfo').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
	//$('#d_fjzl').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
	//$('#d_yzzl').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
	view.get(&quot;#dsHouse&quot;).set(&quot;parameter&quot;,data).flushAsync();&#xD;
	view.get(&quot;#dsOwner&quot;).set(&quot;parameter&quot;,data).flushAsync();&#xD;
	&#xD;
	var parameter = {&#xD;
		room_no:obj.get(&quot;roomNo&quot;).split(&quot;|&quot;)[0]&#xD;
	};&#xD;
	&#xD;
	view.get(&quot;#dsChargeInfo&quot;).set(&quot;parameter&quot;,parameter).flushAsync();&#xD;
}&#xD;
&#xD;
</ClientEvent>
                <Property name="dataSet">dsAllArea</Property>
                <BindingConfigs>
                  <BindingConfig>
                    <Property name="name">allArea</Property>
                    <Property name="childrenProperty">allArea</Property>
                    <Property name="labelProperty">buildName</Property>
                    <Property name="icon">url(>skin>common/icons.gif) -240px -40px</Property>
                    <BindingConfig>
                      <Property name="name">areaProperty</Property>
                      <Property name="childrenProperty">areaProperty</Property>
                      <Property name="labelProperty">communityName</Property>
                      <Property name="icon">url(>skin>common/icons.gif) -60px -40px</Property>
                      <BindingConfig>
                        <Property name="name">buildingProperty</Property>
                        <Property name="childrenProperty">buildingProperty</Property>
                        <Property name="labelProperty">storiedBuildName</Property>
                        <Property name="icon">url(>skin>common/icons.gif) -40px -40px</Property>
                        <BindingConfig>
                          <Property name="name">houseProperty</Property>
                          <Property name="childrenProperty">houseProperty</Property>
                          <Property name="labelProperty">roomNo</Property>
                          <Property name="icon">url(>skin>common/icons.gif) -0px -20px</Property>
                        </BindingConfig>
                      </BindingConfig>
                    </BindingConfig>
                  </BindingConfig>
                </BindingConfigs>
              </DataTree>
            </ControlTab>
            <ControlTab>
              <Property name="caption">列表选择</Property>
              <Container>
                <FieldSet layout="padding:0">
                  <Property name="caption">查询条件</Property>
                  <Property name="height">140</Property>
                  <Property name="contentOverflowY">hidden</Property>
                  <Buttons>
                    <Button>
                      <ClientEvent name="onClick">var data = view.get(&quot;#listSearch.entity&quot;);&#xD;
with (view.get(&quot;#dsRoomAndOwner&quot;)) {&#xD;
	set(&quot;parameter&quot;, data);&#xD;
	flush();&#xD;
}&#xD;
</ClientEvent>
                      <Property name="caption">查询</Property>
                      <Property name="width">150</Property>
                    </Button>
                  </Buttons>
                  <Children>
                    <AutoForm id="listSearch">
                      <Property name="cols">*,1</Property>
                      <Property name="labelWidth">50</Property>
                      <Property name="editorWidth">100px</Property>
                      <Property name="showHint">false</Property>
                      <AutoFormElement>
                        <Property name="name">buildName</Property>
                        <Property name="property">buildName</Property>
                        <Property name="label">楼盘</Property>
                        <Property name="editable">false</Property>
                        <Editor>
                          <TextEditor>
                            <Property name="trigger">allAreaDrop</Property>
                          </TextEditor>
                        </Editor>
                      </AutoFormElement>
                      <AutoFormElement id="buildId">
                        <Property name="name">buildId</Property>
                        <Property name="property">buildId</Property>
                        <Editor/>
                      </AutoFormElement>
                      <AutoFormElement>
                        <Property name="name">keyWord</Property>
                        <Property name="property">keyWord</Property>
                        <Property name="label">关键字</Property>
                        <Editor/>
                      </AutoFormElement>
                    </AutoForm>
                  </Children>
                </FieldSet>
                <ToolBar>
                  <ToolBarLabel>
                    <Property name="text">客户列表</Property>
                  </ToolBarLabel>
                </ToolBar>
                <DataGrid>
                  <ClientEvent name="onDataRowClick">var roomId = view.get(&quot;#dsRoomAndOwner&quot;).getData(&quot;#&quot;).get(&quot;roomId&quot;);&#xD;
var roomNo = view.get(&quot;#dsRoomAndOwner&quot;).getData(&quot;#&quot;).get(&quot;roomNo&quot;);&#xD;
var data = {&#xD;
	roomId:roomId&#xD;
};&#xD;
//view.get(&quot;#noSelectTip&quot;).set(&quot;visible&quot;,false);&#xD;
view.get(&quot;#roomDetail&quot;).refreshData();&#xD;
view.get(&quot;#ownerInfo&quot;).refreshData();&#xD;
$('#d_roomDetail').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
$('#d_ownerInfo').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
$('#d_fjzl').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
//$('#d_yzzl').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
view.get(&quot;#dsHouse&quot;).set(&quot;parameter&quot;,data).flushAsync();&#xD;
view.get(&quot;#dsOwner&quot;).set(&quot;parameter&quot;,data).flushAsync();&#xD;
&#xD;
var parameter = {&#xD;
		room_no:roomNo&#xD;
};&#xD;
view.get(&quot;#dsChargeInfo&quot;).set(&quot;parameter&quot;,parameter).flushAsync();&#xD;
</ClientEvent>
                  <Property name="dataSet">dsRoomAndOwner</Property>
                  <Property name="readOnly">true</Property>
                  <RowNumColumn/>
                  <DataColumn name="ownerId">
                    <Property name="property">ownerId</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="roomId">
                    <Property name="property">roomId</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="roomNo">
                    <Property name="property">roomNo</Property>
                    <Property name="visible">true</Property>
                  </DataColumn>
                  <DataColumn name="ownerName">
                    <Property name="property">ownerName</Property>
                  </DataColumn>
                  <DataColumn name="phone">
                    <Property name="property">phone</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="cardId">
                    <Property name="property">cardId</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="carId">
                    <Property name="property">carId</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="ownerType">
                    <Property name="property">ownerType</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="makeRoomDate">
                    <Property name="property">makeRoomDate</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                  <DataColumn name="decorateDate">
                    <Property name="property">decorateDate</Property>
                    <Property name="visible">false</Property>
                  </DataColumn>
                </DataGrid>
              </Container>
            </ControlTab>
          </TabControl>
        </Container>
      </SideControl>
    </SplitPanel>
    <UpdateAction id="updateAction1">
      <Property name="dataResolver">chargeInfo#saveAll</Property>
      <UpdateItem>
        <Property name="dataSet">dsChargeInfo</Property>
      </UpdateItem>
    </UpdateAction>
    <UpdateAction id="deleteAction">
      <Property name="dataResolver">chargeInfo#delete</Property>
      <UpdateItem>
        <Property name="dataSet">dsChargeInfo</Property>
        <Property name="dataPath">[#current]</Property>
      </UpdateItem>
    </UpdateAction>
    <CustomDropDown id="customDropDown1">
      <Property name="userData"></Property>
      <Property name="autoOpen">true</Property>
      <Property name="height">300</Property>
      <Property name="width">400</Property>
      <Property name="editable">false</Property>
      <DataTree>
        <ClientEvent name="onDataRowClick">var obj = self.get(&quot;currentEntity&quot;);&#xD;
var level = self.get(&quot;currentNode&quot;).get(&quot;level&quot;);&#xD;
if(level == 4){&#xD;
	var data = {&#xD;
		roomId:obj.get(&quot;roomId&quot;)&#xD;
	};&#xD;
	/*&#xD;
	view.get(&quot;#noSelectTip&quot;).set(&quot;visible&quot;,false);&#xD;
	view.get(&quot;#roomDetail&quot;).refreshData();&#xD;
	$('#d_roomDetail').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
	$('#d_fjzl').css(&quot;visibility&quot;,&quot;visible&quot;);&#xD;
	*/&#xD;
	view.get(&quot;#dsOwner&quot;).set(&quot;parameter&quot;,data).flushAsync(function(res){&#xD;
		var ser = view.get(&quot;#dsChargeInfo.data.current&quot;);&#xD;
		ser.set(&quot;owner_name&quot;,res.current.get(&quot;ownerName&quot;));	&#xD;
		ser.set(&quot;room_no&quot;,res.current.get(&quot;roomNo&quot;));&#xD;
		ser.set(&quot;room_id&quot;,res.current.get(&quot;roomId&quot;));&#xD;
		ser.set(&quot;owner_id&quot;,res.current.get(&quot;ownerId&quot;));&#xD;
		ser.set(&quot;state&quot;,&quot;01&quot;);&#xD;
	});&#xD;
	&#xD;
	var dropDown = dorado.widget.DropDown.findDropDown(self);&#xD;
	dropDown.close();&#xD;
}&#xD;
&#xD;
</ClientEvent>
        <Property name="dataSet">dsAllArea</Property>
        <BindingConfigs>
          <BindingConfig>
            <Property name="name">allArea</Property>
            <Property name="childrenProperty">allArea</Property>
            <Property name="labelProperty">buildName</Property>
            <Property name="icon">url(>skin>common/icons.gif) -240px -40px</Property>
            <BindingConfig>
              <Property name="name">areaProperty</Property>
              <Property name="childrenProperty">areaProperty</Property>
              <Property name="labelProperty">communityName</Property>
              <Property name="icon">url(>skin>common/icons.gif) -60px -40px</Property>
              <BindingConfig>
                <Property name="name">buildingProperty</Property>
                <Property name="childrenProperty">buildingProperty</Property>
                <Property name="labelProperty">storiedBuildName</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -40px</Property>
                <BindingConfig>
                  <Property name="name">houseProperty</Property>
                  <Property name="childrenProperty">houseProperty</Property>
                  <Property name="labelProperty">roomNo</Property>
                  <Property name="icon">url(>skin>common/icons.gif) -0px -20px</Property>
                </BindingConfig>
              </BindingConfig>
            </BindingConfig>
          </BindingConfig>
        </BindingConfigs>
      </DataTree>
    </CustomDropDown>
    <DataSetDropDown id="chargeTypeDropDown">
      <Property name="dataSet">dsChargeTypeSet</Property>
      <Property name="displayProperty">charge_type_name</Property>
      <Property name="property">charge_type_name</Property>
      <Property name="assignmentMap">charge_type_no=charge_type_no,receive_amount=charge_price,price=charge_price</Property>
    </DataSetDropDown>
    <ListDropDown id="PayModeDropDown">
      <Property name="userData"></Property>
      <Property name="items">
        <Collection>
          <Entity>
            <Property name="key">01</Property>
            <Property name="value">抵扣</Property>
          </Entity>
          <Entity>
            <Property name="key">02</Property>
            <Property name="value">现金</Property>
          </Entity>
          <Entity>
            <Property name="key">03</Property>
            <Property name="value">支票</Property>
          </Entity>
          <Entity>
            <Property name="key">04</Property>
            <Property name="value">转账</Property>
          </Entity>
          <Entity>
            <Property name="key">05</Property>
            <Property name="value">支付宝</Property>
          </Entity>
          <Entity>
            <Property name="key">06</Property>
            <Property name="value">POS机</Property>
          </Entity>
          <Entity>
            <Property name="key">99</Property>
            <Property name="value">其他</Property>
          </Entity>
        </Collection>
      </Property>
      <Property name="property">value</Property>
      <Property name="displayProperty">value</Property>
    </ListDropDown>
    <ListDropDown id="TicketModeDropDown">
      <Property name="userData"></Property>
      <Property name="items">
        <Collection>
          <Entity>
            <Property name="key">01</Property>
            <Property name="value">发票</Property>
          </Entity>
          <Entity>
            <Property name="key">02</Property>
            <Property name="value">收据</Property>
          </Entity>
        </Collection>
      </Property>
      <Property name="property">value</Property>
      <Property name="displayProperty">value</Property>
    </ListDropDown>
    <UpdateAction id="paidInfoAction">
      <Property name="dataResolver">chargeReceivableInfo#paidInfoSave</Property>
      <UpdateItem>
        <Property name="dataSet">dsPaidInfo</Property>
        <Property name="dataPath">[#current]</Property>
      </UpdateItem>
    </UpdateAction>
  </View>
</ViewConfig>
