<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="dataTypeVoucher">
      <Property name="creationType">com.jdry.pms.assertStockManage.pojo.VoucherModel</Property>
      <PropertyDef name="voucher_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="voucher_code">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="occurren_date">
        <Property name="dataType">Date</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="owne_stock">
        <Property></Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="t_handler">
        <Property></Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="orther">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="warehouse_code"/>
      <PropertyDef name="suppliy_code">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="suppliy_name">
        <Property name="label">供应商</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dataTypeInstock">
      <Property name="creationType">com.jdry.pms.assertStockManage.pojo.InstockModel</Property>
      <PropertyDef name="instock_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="suppliy_code">
        <Property></Property>
        <Property name="label">供应商编码</Property>
      </PropertyDef>
      <PropertyDef name="voucher_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="suppliy_name">
        <Property></Property>
        <Property name="label">供应商</Property>
      </PropertyDef>
      <PropertyDef name="unit_price">
        <Property name="dataType">double</Property>
        <Property name="label">单价</Property>
      </PropertyDef>
      <PropertyDef name="suppliy_num">
        <Property name="dataType">int</Property>
        <Property name="label">数量</Property>
      </PropertyDef>
      <PropertyDef name="instock_time">
        <Property name="dataType">Date</Property>
        <Property name="label">入库时间</Property>
      </PropertyDef>
      <PropertyDef name="item_code">
        <Property></Property>
        <Property name="label">物品编码</Property>
      </PropertyDef>
      <PropertyDef name="item_name">
        <Property></Property>
        <Property name="label">物品名称</Property>
      </PropertyDef>
      <PropertyDef name="sum_price">
        <Property name="dataType">double</Property>
        <Property name="label">金额</Property>
      </PropertyDef>
      <PropertyDef name="item_type">
        <Property></Property>
        <Property name="label">物品类型</Property>
      </PropertyDef>
      <PropertyDef name="oper_id">
        <Property></Property>
      </PropertyDef>
    </DataType>
    <DataType name="dataTypeItemFiles">
      <Property name="creationType">com.jdry.pms.assertStockManage.pojo.Titmsfiles</Property>
      <PropertyDef name="item_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="item_code">
        <Property></Property>
        <Property name="label">物品编码</Property>
      </PropertyDef>
      <PropertyDef name="bar_code">
        <Property></Property>
        <Property name="label">物品条码</Property>
      </PropertyDef>
      <PropertyDef name="item_name">
        <Property></Property>
        <Property name="label">物品名称</Property>
      </PropertyDef>
      <PropertyDef name="item_type">
        <Property></Property>
        <Property name="label">物品型号</Property>
      </PropertyDef>
      <PropertyDef name="item_unit">
        <Property></Property>
        <Property name="label">单位</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">01</Property>
                <Property name="value">个</Property>
              </Entity>
              <Entity>
                <Property name="key">02</Property>
                <Property name="value">米</Property>
              </Entity>
              <Entity>
                <Property name="key">03</Property>
                <Property name="value">套</Property>
              </Entity>
              <Entity>
                <Property name="key">04</Property>
                <Property name="value">盒</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="stock_uplimit">
        <Property name="dataType">double</Property>
        <Property name="label">库存上限</Property>
      </PropertyDef>
      <PropertyDef name="stock_lowerlimit">
        <Property name="dataType">double</Property>
        <Property name="label">库存下限</Property>
      </PropertyDef>
      <PropertyDef name="defu_inprice">
        <Property name="dataType">double</Property>
        <Property name="label">默认入库价</Property>
      </PropertyDef>
      <PropertyDef name="defu_outprice">
        <Property name="dataType">double</Property>
        <Property name="label">默认出库价</Property>
      </PropertyDef>
      <PropertyDef name="Stock_avgprice">
        <Property name="dataType">double</Property>
        <Property name="label">库存平均价</Property>
      </PropertyDef>
      <PropertyDef name="item_flag">
        <Property name="label">物品类别</Property>
      </PropertyDef>
      <PropertyDef name="type_name">
        <Property name="label">物品类别</Property>
      </PropertyDef>
      <PropertyDef name="suppliy_num">
        <Property name="label">现有库存量</Property>
      </PropertyDef>
      <PropertyDef name="item_flagName">
        <Property name="label">物品类型</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dataTypeWareHouse">
      <Property name="creationType">com.jdry.pms.assertStockManage.pojo.WareHouseFiles</Property>
      <PropertyDef name="warehouse_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="warehouse_code">
        <Property></Property>
        <Property name="label">仓库编码</Property>
      </PropertyDef>
      <PropertyDef name="warehouse_name">
        <Property></Property>
        <Property name="label">仓库名称</Property>
      </PropertyDef>
      <PropertyDef name="warehouse_address">
        <Property></Property>
        <Property name="label">地址</Property>
      </PropertyDef>
      <PropertyDef name="link_man">
        <Property></Property>
        <Property name="label">联系人</Property>
      </PropertyDef>
      <PropertyDef name="link_phone">
        <Property></Property>
        <Property name="label">电话</Property>
      </PropertyDef>
      <PropertyDef name="other">
        <Property></Property>
        <Property name="label">备注</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dataTypeSupplieInfo">
      <Property name="creationType">com.jdry.pms.assertStockManage.pojo.SupplieInfo</Property>
      <PropertyDef name="suppliy_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="suppliy_code">
        <Property></Property>
        <Property name="label">供货商编码</Property>
      </PropertyDef>
      <PropertyDef name="suppliy_name">
        <Property></Property>
        <Property name="label">供货商名称</Property>
      </PropertyDef>
      <PropertyDef name="link_name">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="link_phone">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="link_address">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="fax">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="zip_code">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="url">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="bank">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="bank_account">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="linke_moble">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="qq">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="other">
        <Property></Property>
      </PropertyDef>
    </DataType>
    <DataType name="dataTypeSupplieType">
      <Property name="creationType">com.jdry.pms.assertStockManage.pojo.SupplieType</Property>
      <PropertyDef name="supplytype_id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="supply_code">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="type_name">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="type_orther">
        <Property></Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <ClientEvent name="onRefreshDom">&#xD;
</ClientEvent>
    <Property name="packages">sweetalert-js,sweetalert-css</Property>
    <DataSet id="dataSetVoucher">
      <Property name="dataProvider">voucherView#generVoucherOrder</Property>
      <Property name="dataType">[dataTypeVoucher]</Property>
      <Property name="loadMode">manual</Property>
      <Property name="parameter">
        <Entity>
          <Property name="key">type</Property>
          <Property name="value">0</Property>
        </Entity>
      </Property>
    </DataSet>
    <DataSet id="dataSetInstock">
      <Property name="dataType">[dataTypeInstock]</Property>
      <Property name="dataProvider">voucherView#getInstock</Property>
      <Property name="pageSize">10</Property>
      <Property name="loadMode">manual</Property>
    </DataSet>
    <DataSet id="dsItemFiles">
      <Property name="pageSize">10</Property>
      <Property name="dataType">[dataTypeItemFiles]</Property>
      <Property name="dataProvider">itmsfilesView#quaryItmsfilesInfo</Property>
    </DataSet>
    <DataSet id="dsWareHouse">
      <Property name="dataProvider">wareHouseFilesView#quaryWareHouseFilesInfo</Property>
      <Property name="pageSize">10</Property>
      <Property name="dataType">[dataTypeWareHouse]</Property>
    </DataSet>
    <DataSet id="dsSupplieInfo">
      <Property name="pageSize">10</Property>
      <Property name="dataProvider">supplierInfoView#quarySupplierInfo</Property>
      <Property name="dataType">[dataTypeSupplieInfo]</Property>
    </DataSet>
    <DataSet id="dsSupplieType">
      <Property name="dataProvider">supplieTypeView#getSuplieTypeInfo</Property>
      <Property name="pageSize">100</Property>
      <Property name="dataType">[dataTypeSupplieType]</Property>
    </DataSet>
    <FieldSet>
      <Property name="caption">单据维护</Property>
      <Buttons>
        <Button id="new">
          <ClientEvent name="onClick">&#xD;
&#xD;
</ClientEvent>
          <Property name="caption">新增单据</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">var i=0,msg=&quot;&quot;;&#xD;
var voucher_code=view.get(&quot;#voucherAutoForm.entity&quot;).get(&quot;voucher_code&quot;);&#xD;
var occurren_date=view.get(&quot;#voucherAutoForm.entity&quot;).get(&quot;occurren_date&quot;);&#xD;
if(occurren_date==&quot;&quot;||occurren_date==undefined)&#xD;
{&#xD;
	i++;&#xD;
	msg += &quot;\n  [&quot; + i + &quot;].时间不能为空。&quot;;	&#xD;
	dorado.MessageBox.alert(msg);&#xD;
	return false;&#xD;
}&#xD;
var owne_stock=view.get(&quot;#voucherAutoForm.entity&quot;).get(&quot;owne_stock&quot;);&#xD;
if(owne_stock==&quot;&quot;||owne_stock==undefined)&#xD;
{&#xD;
	i++;&#xD;
	msg += &quot;\n  [&quot; + i + &quot;].所属库存不能为空。&quot;;	&#xD;
	dorado.MessageBox.alert(msg);&#xD;
	return false;&#xD;
}&#xD;
&#xD;
var t_handler=view.get(&quot;#voucherAutoForm.entity&quot;).get(&quot;t_handler&quot;);&#xD;
if(t_handler==&quot;&quot;||t_handler==undefined)&#xD;
{&#xD;
	i++;&#xD;
	msg += &quot;\n  [&quot; + i + &quot;].经手者不能为空。&quot;;	&#xD;
	dorado.MessageBox.alert(msg);&#xD;
	return false;&#xD;
}&#xD;
var suppliy_code=view.get(&quot;#voucherAutoForm.entity&quot;).get(&quot;suppliy_code&quot;);&#xD;
if(suppliy_code==&quot;&quot;||suppliy_code==undefined)&#xD;
{&#xD;
	i++;&#xD;
	msg += &quot;\n  [&quot; + i + &quot;].供应商不能为空。&quot;;	&#xD;
	dorado.MessageBox.alert(msg);&#xD;
	return false;&#xD;
}&#xD;
//////////////////////////////////////////////&#xD;
   &#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
////////////////////////////////////////////////&#xD;
var dgInstock = view.get(&quot;#DataGridInstock&quot;);&#xD;
var instock_id =dgInstock.getCurrentItem().get(&quot;instock_id&quot;);&#xD;
var selections = view.get(&quot;#DataGridInstock.selection&quot;);//获取所有选中的数据&#xD;
var parameter = {&#xD;
	voucher_code:voucher_code,&#xD;
	occurren_date:occurren_date,&#xD;
	owne_stock:owne_stock,&#xD;
	t_handler:t_handler,&#xD;
	suppliy_code:suppliy_code,&#xD;
	instock_id:instock_id,&#xD;
	type:1,&#xD;
	instockList:selections&#xD;
}&#xD;
&#xD;
if(selections==&quot;&quot;||selections==undefined)&#xD;
{&#xD;
	dorado.MessageBox.alert(&quot;请选择物资信息后再保存&quot;);&#xD;
	return false;&#xD;
	&#xD;
}else&#xD;
{&#xD;
	&#xD;
//------------------------------------------	&#xD;
	dorado.MessageBox.confirm(&quot;确定要入库吗？&quot;,function(){&#xD;
		var actSave = view.get(&quot;#saveStock&quot;);&#xD;
		actSave.set(&quot;parameter&quot;,&#xD;
		{&#xD;
			'vouches' : parameter&#xD;
		});&#xD;
		actSave.execute(function(arg) {&#xD;
			if(arg==false)&#xD;
			{&#xD;
				dorado.MessageBox.alert(&quot;入库失败，联系管理员&quot;);&#xD;
				&#xD;
			}else{&#xD;
			  dorado.MessageBox.alert(&quot;入库成功&quot;);&#xD;
			  view.get(&quot;#dataSetVoucher&quot;).clear();&#xD;
			  view.get(&quot;#dataSetInstock&quot;).clear();&#xD;
			}&#xD;
		});&#xD;
	&#xD;
	});&#xD;
}&#xD;
&#xD;
&#xD;
&#xD;
	&#xD;
&#xD;
&#xD;
</ClientEvent>
          <Property name="caption">保存单据</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm id="voucherAutoForm">
          <Property name="dataType">dataTypeVoucher</Property>
          <Property name="cols">*,*,*</Property>
          <Property name="dataSet">dataSetVoucher</Property>
          <AutoFormElement id="voucher_code">
            <Property name="name">voucher_code</Property>
            <Property name="property">voucher_code</Property>
            <Property name="readOnly">true</Property>
            <Property name="label">单据编码：</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">occurren_date</Property>
            <Property name="property">occurren_date</Property>
            <Property name="label">发生日期：</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">owne_stock</Property>
            <Property name="property">owne_stock</Property>
            <Property name="label">所属库存：</Property>
            <Property name="trigger">dsWareHouseDropDown</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">t_handler</Property>
            <Property name="property">t_handler</Property>
            <Property name="label">经手人：</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">suppliy_name</Property>
            <Property name="property">suppliy_name</Property>
            <Property name="trigger">dsSupplieInfoDropDown</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orther</Property>
            <Property name="property">orther</Property>
            <Property name="label">备注：</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">warehouse_code</Property>
            <Property name="property">warehouse_code</Property>
            <Property name="visible">false</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">suppliy_code</Property>
            <Property name="property">suppliy_code</Property>
            <Property name="visible">false</Property>
            <Editor/>
          </AutoFormElement>
        </AutoForm>
      </Children>
    </FieldSet>
    <DataSetDropDown id="dsWareHouseDropDown">
      <Property name="assignmentMap">warehouse_code=warehouse_code,owne_stock=warehouse_name</Property>
      <Property name="autoOpen">true</Property>
      <Property name="dataSet">dsWareHouse</Property>
      <Property name="dynaFilter">true</Property>
      <Property name="property">warehouse_name</Property>
      <Property name="reloadDataOnOpen">true</Property>
    </DataSetDropDown>
    <DataSetDropDown id="dsSupplieInfoDropDown">
      <Property name="assignmentMap">suppliy_code=suppliy_code,suppliy_name=suppliy_name</Property>
      <Property name="property">suppliy_name</Property>
      <Property name="reloadDataOnOpen">true</Property>
      <Property name="dynaFilter">true</Property>
      <Property name="dataSet">dsSupplieInfo</Property>
      <Property name="autoOpen">true</Property>
    </DataSetDropDown>
    <ToolBar>
      <Property name="fixRight">true</Property>
      <ToolBarLabel>
        <Property name="text">入库明细单</Property>
      </ToolBarLabel>
      <Fill/>
      <ToolBarButton id="btn">
        <ClientEvent name="onClick">/* var voucher_code=&quot;&quot;;&#xD;
  try{&#xD;
	 voucher_code=view.get(&quot;#voucherAutoForm.entity&quot;).get(&quot;voucher_code&quot;);&#xD;
		&#xD;
	 }catch(e){&#xD;
	  voucher_code =&quot;&quot;;&#xD;
    }&#xD;
	if(voucher_code.length>0){&#xD;
	&#xD;
		view.get(&quot;#choseStock&quot;).set(&quot;caption&quot;,&quot;选择&quot;);&#xD;
		view.get(&quot;#choseStock&quot;).show();&#xD;
	}else&#xD;
	{&#xD;
		dorado.MessageBox.alert(&quot;请先选择新增单据&quot;);&#xD;
	}&#xD;
*/</ClientEvent>
        <Property name="caption">增加物资信息</Property>
        <Property name="icon">url(>skin>common/icons.gif) -120px -0px</Property>
      </ToolBarButton>
      <ToolBarButton>
        <ClientEvent name="onClick">view.get(&quot;#addinstok&quot;).set(&quot;caption&quot;,&quot;编辑&quot;);&#xD;
view.get(&quot;#addinstok&quot;).show();</ClientEvent>
        <Property name="caption">编辑物资信息</Property>
        <Property name="icon">url(>skin>common/icons.gif) -200px -0px</Property>
      </ToolBarButton>
      <ToolBarButton>
        <ClientEvent name="onClick">dorado.MessageBox.confirm(&quot;确定要删除选中的记录吗？&quot;,function(){&#xD;
	var entity=view.get(&quot;#dsItemFiles.data:#&quot;);&#xD;
	var updateItemsInfoeaction=view.get(&quot;#updateItemsInfoeaction&quot;);&#xD;
	if(entity){&#xD;
	    entity.remove();&#xD;
		updateItemsInfoeaction.execute();&#xD;
	}else{&#xD;
	    dorado.MessageBox.alert(&quot;必须选中一行记录！&quot;);&#xD;
	}&#xD;
});&#xD;
&#xD;
</ClientEvent>
        <Property name="caption">删除</Property>
        <Property name="icon">url(>skin>common/icons.gif) -140px -0px</Property>
      </ToolBarButton>
    </ToolBar>
    <DataGrid id="DataGridInstock">
      <Property name="dataSet">dataSetInstock</Property>
      <Property name="height">317px</Property>
      <Property name="readOnly">true</Property>
      <Property name="selectionMode">multiRows</Property>
      <RowSelectorColumn id="selectionAction">
        <Property name="caption">选择</Property>
        <Property name="align">left</Property>
        <Property name="name">selectionAction</Property>
      </RowSelectorColumn>
      <RowNumColumn/>
      <DataColumn name="item_code">
        <Property name="property">item_code</Property>
      </DataColumn>
      <DataColumn id="item_name" name="item_name">
        <Property name="property">item_name</Property>
      </DataColumn>
      <DataColumn>
        <Property name="name">suppliy_num</Property>
        <Property name="property">suppliy_num</Property>
        <Editor/>
      </DataColumn>
      <DataColumn name="unit_price">
        <Property name="property">unit_price</Property>
      </DataColumn>
      <DataColumn name="sum_price">
        <Property name="property">sum_price</Property>
      </DataColumn>
    </DataGrid>
    <ToolBar>
      <DataPilot>
        <Property name="dataSet">dataSetInstock</Property>
        <Property name="itemCodes">pages</Property>
      </DataPilot>
    </ToolBar>
    <Dialog id="choseStock">
      <Property name="width">800px</Property>
      <Property name="height">400px</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">    var dgAppraise = view.get(&quot;#itemFilesDataGrid&quot;);&#xD;
	var actReport = view.get(&quot;#ajaxActionInstock&quot;);&#xD;
	var selection = dgAppraise.get('selection');//获取所有选中的数据&#xD;
	actReport.set(&quot;parameter&quot;,{&#xD;
		'instockList' : selection&#xD;
	});&#xD;
	actReport.execute(function(arg) {&#xD;
		alert(arg+&quot;==ceshi===&quot;);&#xD;
		if(arg)&#xD;
		{&#xD;
		 dorado.MessageBox.alert(&quot;新增成功&quot;);&#xD;
		 view.get(&quot;#itemFilesDataGrid&quot;).unselectAll();&#xD;
		 view.get(&quot;#dataSetInstock&quot;).flush();&#xD;
		 view.get(&quot;#choseStock&quot;).hide();&#xD;
		}else &#xD;
		{&#xD;
		 dorado.MessageBox.alert(&quot;入库明细单中已存在&quot;);	&#xD;
		}&#xD;
		&#xD;
	});</ClientEvent>
          <Property name="caption">确定</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#choseStock&quot;).hide();&#xD;
</ClientEvent>
          <Property name="caption">取消</Property>
        </Button>
      </Buttons>
      <Children>
        <FieldSet>
          <Property name="caption">查询条件</Property>
          <Property name="height">200px</Property>
          <Buttons>
            <Button>
              <ClientEvent name="onClick">var data = view.get(&quot;#itemAutoForm.entity&quot;);&#xD;
with (view.get(&quot;#dsItemFiles&quot;)) {&#xD;
	set(&quot;parameter&quot;, data);&#xD;
	flush();&#xD;
}&#xD;
&#xD;
</ClientEvent>
              <Property name="caption">查询</Property>
              <Property name="icon">url(>skin>common/icons.gif) -280px -100px</Property>
              <Property name="iconClass">fa fa-check</Property>
            </Button>
          </Buttons>
          <Children>
            <AutoForm id="itemAutoForm">
              <Property name="dataType">dataTypeItemFiles</Property>
              <Property name="cols">*,*,*</Property>
              <Property name="width">800px</Property>
              <AutoFormElement>
                <Property name="name">item_code</Property>
                <Property name="property">item_code</Property>
                <Property name="label">物品编码：</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">bar_code</Property>
                <Property name="property">bar_code</Property>
                <Property name="label">物品条码</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">item_name</Property>
                <Property name="property">item_name</Property>
                <Property name="label">物品名称：</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">item_flagName</Property>
                <Property name="property">item_flagName</Property>
                <Property name="trigger">dsDropDownSuppliyType</Property>
                <Property name="label">物品类别</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">item_unit</Property>
                <Property name="property">item_unit</Property>
                <Property name="label">单位：</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">item_flag</Property>
                <Property name="property">item_flag</Property>
                <Property name="label">类型：</Property>
                <Editor/>
              </AutoFormElement>
            </AutoForm>
          </Children>
        </FieldSet>
        <Panel>
          <Property name="height">300px</Property>
          <Buttons/>
          <Children>
            <ToolBar>
              <CheckBox id="checkAll">
                <ClientEvent name="onClick">var checkAllValue = view.get(&quot;#checkAll&quot;).get(&quot;value&quot;);&#xD;
if(checkAllValue == true) {&#xD;
	view.get(&quot;#itemFilesDataGrid&quot;).selectAll();&#xD;
}else if(checkAllValue == false) {&#xD;
	view.get(&quot;#itemFilesDataGrid&quot;).unselectAll();&#xD;
}&#xD;
&#xD;
&#xD;
   </ClientEvent>
                <Property name="caption">全选/不选</Property>
              </CheckBox>
            </ToolBar>
            <DataGrid id="itemFilesDataGrid">
              <Property name="selectionMode">multiRows</Property>
              <Property name="dataSet">dsItemFiles</Property>
              <Property name="readOnly">true</Property>
              <Property name="height">220px</Property>
              <RowSelectorColumn id="selection">
                <Property name="caption">选择</Property>
              </RowSelectorColumn>
              <RowNumColumn/>
              <DataColumn name="item_code">
                <Property name="property">item_code</Property>
              </DataColumn>
              <DataColumn name="bar_code">
                <Property name="property">bar_code</Property>
              </DataColumn>
              <DataColumn name="item_name">
                <Property name="property">item_name</Property>
              </DataColumn>
              <DataColumn name="item_type">
                <Property name="property">item_type</Property>
              </DataColumn>
              <DataColumn>
                <Property name="name">type_name</Property>
                <Property name="property">type_name</Property>
                <Property name="readOnly">true</Property>
                <Property name="align">center</Property>
                <Editor/>
              </DataColumn>
              <DataColumn name="suppliy_num">
                <Property name="property">suppliy_num</Property>
                <Property name="align">center</Property>
              </DataColumn>
              <DataColumn name="item_unit">
                <Property name="property">item_unit</Property>
              </DataColumn>
              <DataColumn name="stock_uplimit">
                <Property name="property">stock_uplimit</Property>
              </DataColumn>
              <DataColumn name="stock_lowerlimit">
                <Property name="property">stock_lowerlimit</Property>
              </DataColumn>
              <DataColumn name="defu_inprice">
                <Property name="property">defu_inprice</Property>
              </DataColumn>
              <DataColumn name="defu_outprice">
                <Property name="property">defu_outprice</Property>
              </DataColumn>
            </DataGrid>
            <ToolBar>
              <DataPilot>
                <Property name="itemCodes">pages</Property>
                <Property name="dataSet">dsItemFiles</Property>
              </DataPilot>
            </ToolBar>
          </Children>
          <Tools/>
        </Panel>
      </Children>
      <Tools/>
    </Dialog>
    <AjaxAction id="ajaxActionInstock">
      <Property name="service">voucherView#reportInstock</Property>
      <Property name="parameter"></Property>
    </AjaxAction>
    <Dialog id="addinstok">
      <ClientEvent name="onClose">view.get(&quot;#dsTemp&quot;).flush();</ClientEvent>
      <Property name="height">250px</Property>
      <Property name="width">250px</Property>
      <Property name="icon">url(>skin>common/icons.gif) -280px -100px</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var instock_id=view.get(&quot;#editInstockForm.entity&quot;).get(&quot;instock_id&quot;);&#xD;
var unit_price=view.get(&quot;#editInstockForm.entity&quot;).get(&quot;unit_price&quot;);&#xD;
var suppliy_num=view.get(&quot;#editInstockForm.entity&quot;).get(&quot;suppliy_num&quot;);&#xD;
var sum_price=(unit_price*suppliy_num);&#xD;
var item_code=view.get(&quot;#editInstockForm.entity&quot;).get(&quot;item_code&quot;);&#xD;
var parameter = {&#xD;
	unit_price:unit_price,&#xD;
	suppliy_num:suppliy_num,&#xD;
	sum_price:sum_price,&#xD;
	item_code:item_code,&#xD;
	instock_id:instock_id&#xD;
}&#xD;
&#xD;
&#xD;
&#xD;
	var actReport = view.get(&quot;#ajaxActionEditeInsotck&quot;);&#xD;
	&#xD;
	actReport.set(&quot;parameter&quot;,{&#xD;
		'ls' : parameter&#xD;
	});&#xD;
	actReport.execute(function(arg) {&#xD;
		if(arg==false)&#xD;
		{&#xD;
			dorado.MessageBox.alert(&quot;加入的数量超过库存！请重新选库&quot;);&#xD;
		}else&#xD;
		{&#xD;
		dorado.MessageBox.alert(&quot;修改成功！&quot;);&#xD;
		view.get(&quot;#dataSetInstock&quot;).flush();&#xD;
		view.get(&quot;#addinstok&quot;).hide();&#xD;
		}&#xD;
	});&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#addinstok&quot;).hide();&#xD;
&#xD;
</ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm id="editInstockForm">
          <Property name="dataSet">dataSetInstock</Property>
          <Property name="cols">*</Property>
          <AutoFormElement>
            <Property name="name">item_name</Property>
            <Property name="property">item_name</Property>
            <Property name="readOnly">true</Property>
            <Editor>
              <TextEditor/>
            </Editor>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">unit_price</Property>
            <Property name="property">unit_price</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">suppliy_num</Property>
            <Property name="property">suppliy_num</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">item_code</Property>
            <Property name="property">item_code</Property>
            <Property name="visible">false</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">instock_id</Property>
            <Property name="property">instock_id</Property>
            <Editor/>
          </AutoFormElement>
        </AutoForm>
      </Children>
      <Tools/>
    </Dialog>
    <AjaxAction id="ajaxActionEditeInsotck">
      <Property name="service">voucherView#editInstock</Property>
    </AjaxAction>
    <AjaxAction id="saveStock">
      <ClientEvent name="onSuccess">dorado.MessageBox.alert(&quot;入库成功&quot;);</ClientEvent>
      <Property name="service">voucherView#operationInstock</Property>
    </AjaxAction>
    <DataSetDropDown id="dsDropDownSuppliyType">
      <Property name="assignmentMap">item_flag=supply_code,item_flagName=type_name</Property>
      <Property name="autoOpen">true</Property>
      <Property name="dataSet">dsSupplieType</Property>
      <Property name="dynaFilter">true</Property>
      <Property name="property">type_name</Property>
      <Property name="reloadDataOnOpen">true</Property>
    </DataSetDropDown>
  </View>
</ViewConfig>
